<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-body height-500">
                    <%- include('charts/types') %>
                </div>
            </div>
        </div>
    </div>

    <div class="row pt-4">
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-body">
                    <div class="collapse" id="errorCollapse">
                        <div class="alert alert-danger" role="alert">
                            <strong>Error!</strong> There was an error loading the data.
                        </div>
                    </div>
                    <div class="collapse show" id="loadingCollapse">
                        <div class="d-flex justify-content-center">
                            <div class="spinner-border text-primary" role="status">
                                <span class="sr-only">Loading...</span>
                            </div>
                        </div>
                    </div>
                    <div class="collapse" id="tableCollapse">
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered" id="types_table">
                                <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>User</th>
                                    <th>Product</th>
                                    <th>Type</th>
                                    <th>Class</th>
                                    <th>State</th>
                                </tr>
                                </thead>
                                <tbody>
                                <% table.forEach(function(item){ %>
                                    <tr>
                                        <td><%= item.date_added %></td>
                                        <td>
                                            <a href="/admin/users/<%= item.user._id %>">
                                                <%= `${item.user.first_name} ${item.user.last_name}` %>
                                            </a>
                                        </td>
                                        <td>
                                            <a href="/admin/products/<%= item.device_id %>">
                                                <%= item.name %>
                                            </a>
                                        </td>
                                        <td>
                                            <%= item.device_type %>
                                        </td>
                                        <td>
                                            <p class="badge <%= deviceCategory.deviceCategoryToColour(item.category, "bg-") %>">
                                                <%= deviceCategory.deviceCategoryToString(item.category) %>
                                            </p>
                                        </td>
                                        <td>
                                            <p class="badge <%= deviceState.deviceStateToColour(item.state, "bg-") %>">
                                                <%= deviceState.deviceStateToString(item.state) %>
                                            </p>
                                        </td>
                                    </tr>
                                <% }); %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>