<%- include("../components/header") %>

<%- include("../components/navbar") %>

<!----------------------------------------------- Stylesheets used ------------------------------------------------>

<link rel='stylesheet' href='/stylesheets/login_register.css'/>

<!----------------------------------------------- Form-card Layout ------------------------------------------------>

<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-md-5">
            <div class="justify-content-center h-100 mt-3 align-items-center">
                <main class="form-signin w-100 m-auto p-2 justify-content-center align-items-center overflow-hidden fw-bold card shadow-lg rounded-3 bg-transparent">
                    <form class="w-75 py-5" method="POST" action="/register">
                        <h2 class="parent-text text-center align-items-center justify-content-center fw-bold pb-4 my-2">
                            Register
                        </h2>
                        <% if (hasMessages) { %>
                            <section >
                                <ol class="mb-0 list-group list-group-numbered m-1">
                                    <% messages.forEach(function(message) { %>
                                            <li class="border border-danger border-1 bg-danger-subtle pt-2 pb-2 rounded-1 mb-1 list-group-item"><%= message %></li>
                                    <% }); %>
                                </ol>

                            </section>
                        <% } %>
                        <div class="pb-2">
                            <div class="form-floating m-1">
                                <input type="text" class="form-control" id="firstName" name="firstName" placeholder="First Name" required value="Chuck">
                                <label for="firstName">First Name</label>
                            </div>
                            <div class="form-floating m-1">
                                <input type="text" class="form-control" id="lastName" name="lastName" placeholder="Last Name" required value="Norris">
                                <label for="lastName">Last Name</label>
                            </div>
                            <div class="form-floating mt-1 mx-1">
                                <input type="email" class="form-control" id="email" name="email" value="chuck@norris.com"
                                       placeholder="name@example.com"
                                       required>
                                <label for="email">Email address</label>
                            </div>
                            <div class="form-floating m-1">
                                <input type="date" class="form-control" id="dateOfBirth" name="dateOfBirth" value="1000-11-22" required>
                                <label for="dateOfBirth">Date of Birth</label>
                            </div>
                            <div class="form-floating mb-1 mx-1">
                                <input type="password" class="form-control" id="password" name="password" value="12345"
                                       placeholder="Password"
                                       required>
                                <label for="password">Password</label>
                            </div>
                            <div class="form-floating mb-1 mx-1">
                                <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" value="12345"
                                       placeholder="Confirm Password"
                                       required>
                                <label for="confirmPassword">Confirm Password</label>
                            </div>
                        </div>

                        <div class="form-check form-switch text-center m-1">
                            <input class="form-check-input" type="checkbox" value="remember-me" id="tcCheck" required>

                            <label class="form-check-label" for="tcCheck">
                                <p>
                                    Agree to the <a href="#" class="hover-link text-decoration-none">Terms and Conditions</a>
                                </p>
                            </label>

                        </div>

                        <div class="card-footer-sign mt-2">
                            <input type="hidden" id="token" name="token">
                            <button class="btn btn-primary w-100 py-2"
                                    id="submit-btn"
                                    <%= failedCaptcha ? "disabled": ""%>
                                    data-sitekey="6LcF35MpAAAAAEiG9CRDbcZ0EX2xyvOAoUA9sg7Z"
                                    data-callback='onSubmit'
                                    data-action='submit'>Sign up
                            </button>

                            <div class="text-center align-content-center fw-bolder mt-3">
                                <p>Already have an account? <a href="/login" class="hover-link text-decoration-none">Login</a></p>

                            </div>
                        </div>
                    </form>
                </main>
            </div>
        </div>
    </div>
</div>
<script src="https://www.google.com/recaptcha/api.js?render=6LcF35MpAAAAAEiG9CRDbcZ0EX2xyvOAoUA9sg7Z"></script>
<script>
    grecaptcha.ready(function() {
        grecaptcha.execute('6LcF35MpAAAAAEiG9CRDbcZ0EX2xyvOAoUA9sg7Z', {action: 'register'})
            .then(function(token) {
                document.getElementById("submit-btn").addEventListener('click', () => {
                    document.getElementById("token").value = token
                })
            });
    });
</script>

<!----------------------------------------------- Footer ------------------------------------------------>

<%- include("../components/footer") %>